dev:
  image: golang:1.12-alpine

  steps:
    - type: script
      name: Install build tools and git
      options:
        command: apk --no-cache --no-progress add gcc git musl-dev

  reload:
    - type: script
      name: Run tests
      cwd: /source
      options:
        command: go test -cover -coverprofile cover.out -v ./...